<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Básico -->
  <title>{{ page.title | default: 'EGGS-Studio | Arte visual y Murales' }}</title>
  <meta name="description" content="{{ page.description | default: 'EGGS-Studio: experto en arte visual, murales y restauración de arte y docencia de artes.' }}">
  <meta name="keywords" content="{{ page.keywords | default: 'arte visual, murales, restauración de arte, diseño artístico' }}">
  <meta name="author" content="EGGS-Studio">
  <meta name="robots" content="index, follow">

  <!-- Favicon y Manifest -->
  <link rel="icon" href="/assets/img/EGGSLOGOindex1.png" type="image/png" sizes="32x32">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#000000">

  <!-- Open Graph y Twitter Cards -->
  <meta property="og:title" content="{{ page.title | default: 'EGGS-Studio | Arte y Murales' }}">
  <meta property="og:description" content="{{ page.description | default: 'Descubre nuestra experiencia en murales, restauración y arte visual.' }}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ site.url | default: 'https://eggs-studio.cl' }}{{ page.url }}">
  <meta property="og:image" content="{{ site.url | default: 'https://eggs-studio.cl' }}/assets/img/EGGSLOGOindex.jpg">
  <meta property="og:locale" content="es_ES">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Schema.org -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "EGGS-Studio",
    "url": "{{ site.url | default: 'https://eggs-studio.cl' }}",
    "logo": "{{ site.url | default: 'https://eggs-studio.cl' }}/assets/img/EGGSLOGOindex1.jpg",
    "sameAs": [
      "https://www.facebook.com/ART.EGarnica",
      "https://www.instagram.com/egarnicasanchez"
    ],
    "description": "Arte Chileno, Arte visual de Esteban Garnica, especialista en pintura, murales, arte visual y restauración de obras artísticas."
  }
  </script>

  <!-- Estilos -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/carousel.css">

  <!-- Componentes Externos Condicionales -->
  {% if page.carousel %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
  {% endif %}

  {% if page.mermaid %}
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  {% endif %}
</head>

<body>
  <!-- Header -->
  {% include header-es.html %}

  <!-- Contenido Principal -->
  <main id="main-content" role="main" aria-label="Contenido principal">
    {{ content }}
  </main>

  <!-- Footer -->
  {% include footer-es.html %}

  <!-- Scripts Esenciales -->
  <script>
    // Gestión del Menú Responsive
    document.addEventListener('DOMContentLoaded', function() {
      // Menú Hamburguesa
      const navToggle = document.querySelector('.nav-toggle');
      const navMenu = document.querySelector('.nav-menu');
      
      if (navToggle && navMenu) {
        navToggle.addEventListener('click', function() {
          const isExpanded = this.getAttribute('aria-expanded') === 'true';
          this.setAttribute('aria-expanded', !isExpanded);
          navMenu.classList.toggle('active');
          document.body.classList.toggle('no-scroll');
        });
      }

      // Submenús Móviles
      document.querySelectorAll('.dropdown > a').forEach(item => {
        item.addEventListener('click', function(e) {
          if (window.innerWidth < 769) {
            e.preventDefault();
            const parent = this.closest('.dropdown');
            if (parent) {
              parent.classList.toggle('active');
              document.querySelectorAll('.dropdown').forEach(other => {
                if (other !== parent) other.classList.remove('active');
              });
            }
          }
        });
      });

      // Cierre del Menú al hacer clic fuera
      document.addEventListener('click', function(e) {
        if (window.innerWidth < 769 && 
            !e.target.closest('.nav-menu') && 
            !e.target.closest('.nav-toggle')) {
          navMenu.classList.remove('active');
          navToggle.setAttribute('aria-expanded', 'false');
          document.body.classList.remove('no-scroll');
        }
      });
    });

    // Inicialización de Mermaid
    {% if page.mermaid %}
      mermaid.initialize({
        startOnLoad: true,
        theme: 'dark',
        themeVariables: {
          background: '#1e1e1e',
          primaryColor: '#6699ff',
          primaryTextColor: '#ffffff',
          primaryBorderColor: '#00c1cc',
          secondaryColor: '#0086a0',
          lineColor: '#ffffff',
          arrowheadColor: '#ffffff',
          tertiaryColor: '#f89900'
        },
        securityLevel: 'loose'
      });
    {% endif %}
  </script>

  <!-- Scripts Externos Condicionales -->
  {% if page.carousel %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script>
      $(document).ready(function(){
        $('.owl-carousel').owlCarousel({
          loop: true,
          margin: 20,
          nav: true,
          dots: true,
          navText: ['<span aria-label="Anterior">‹</span>', '<span aria-label="Siguiente">›</span>'],
          responsive: {
            0: { items: 1 },
            768: { items: 2 },
            1024: { items: 3 }
          }
        });
      });
    </script>
  {% endif %}

  <!-- Scripts Adicionales -->
  <script src="/assets/js/menu.js" defer></script>
</body>
</html>
